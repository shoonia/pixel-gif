const e=JSON.parse(document.getElementById("colors").textContent),t=(e,t,n)=>[e,t,n].map((e=>{const t=e.toString(16);return t.length<2?"0"+t:t})).join(""),n=/^#/,r=/[^\da-f]/g,a=a=>{let i=a.trim().toLowerCase().replace(n,"");return i in e&&(i=e[i]),r.test(i)&&(i=(e=>{const[n,r,a]=e.match(/(0?\.?\d{1,3})%?\b/g)||[],i=[Number(n),Number(r),Number(a)];return i.every((e=>e>=0&&e<=255))?t(...i):""})(i)),3===i.length&&(i+=i),6!==i.length?[!1]:[!0,i]},i=e=>{let t="";for(;e--;)t+=(16*Math.random()|0).toString(16);return t},l=(e,t,n)=>[71,73,70,56,57,97,1,0,1,0,128,0,0,e,t,n,0,0,0,33,249,4,0,0,0,0,0,44,0,0,0,0,1,0,1,0,0,2,2,68,1,0,59],s=(e,t,n)=>"data:image/gif;base64,"+btoa(String.fromCharCode(...l(e,t,n))),o=(e,t,n,r)=>l(e,t,n).map((e=>e.toString(r))).join(" "),{readyStore:c,connect:d,dispatch:h,getState:u,setState:p}=(e=>{let t={},n={},r=[],a=(e,r)=>{if("@dispatch"!==e&&a("@dispatch",[e,r,t[e]]),t[e]){let i;t[e].forEach((a=>{let l=t[e].includes(a)&&a(n,r);l&&"function"!=typeof l.then&&(n={...n,...l},i={...i,...l})})),i&&a("@changed",i)}},i=(e,n)=>((t[e]||(t[e]=[])).push(n),()=>{t[e]=t[e].filter((e=>e!==n))}),l=()=>n,s=e=>a("@set",e);return i("@set",((e,t)=>t)),e.forEach((e=>{e&&e({dispatch:a,on:i,get:l,set:s})})),a("@init"),{dispatch:a,getState:l,setState:s,connect(...e){let t=e.pop();return r.push({keys:e,cb:t}),()=>{r=r.filter((e=>e.cb!==t))}},readyStore:()=>(a("@ready"),i("@changed",((e,t)=>{r.forEach((e=>{e.keys.some((e=>e in t))&&e.cb(n)}))})),Promise.all(r.map((e=>e.cb(n)))))}})([e=>{e.on("@init",(()=>({r:0,g:0,b:0,radix:16,hex:"000000"}))),e.on("set/rgb",((e,[n,r])=>{const{r:a,g:i,b:l}={...e,[n]:r};return{[n]:r,hex:t(a,i,l)}})),e.on("set/hex",((e,t)=>{const n=parseInt(t,16);return{r:n>>16&255,g:n>>8&255,b:255&n,hex:t}}))}]);let f=(e,t)=>{Array.isArray(t)?t.some((t=>f(e,t))):null!=t&&!1!==t&&e.append(t)},g=e=>{let t=new DocumentFragment;return f(t,e.children),t},m=new Map,b=new Set(["ref","children","__ns"]),x=new Set(["innerHTML","value","muted"]),y=(e,t)=>{if("function"==typeof e)return e(t);let n,r;for(n in e="string"==typeof e?t.__ns?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e):e,t)if(!b.has(n))if(r=t[n],m.has(n))m.get(n)(e,r);else if("style"===n)if("string"==typeof r)e.style.cssText=r;else for(n in r)n.startsWith("--")?e.style.setProperty(n,r[n]):e.style[n]=r[n];else x.has(n)||n.startsWith("on")&&n in e?e[n]=r:null==r||"boolean"==typeof r&&!/^(ari|dat)a-/.test(n)?r?e.setAttribute(n,""):e.removeAttribute(n):e.setAttribute(n,r);return f("template"===e.localName?e.content:e,t.children),r=t.ref,r&&("function"==typeof r?r(e):r.current=e),e},v=e=>Object.seal({current:e}),w=e=>{let t=new Text(e);return[t,e=>{t.textContent=e}]};const S=()=>y("hex-color-picker",{ref:e=>{d("hex",(t=>{e.color="#"+t.hex})),e.addEventListener("color-changed",(()=>{h("set/hex",e.color.slice(1))}))},class:"c"});const k=({id:t})=>y("datalist",{ref:t=>{const n=y(g,{});for(const t in e)n.append(y("option",{value:e[t],children:t}));t.append(n)},id:t}),E=()=>{const e=v(),t="i"+i(6),n=()=>{const[t,n]=a(e.current.value);t&&h("set/hex",n)};return d("hex",(t=>{e.current.value=t.hex})),y("fieldset",{children:[y("legend",{children:"HEX"}),y("input",{ref:e,list:t,onchange:n,onkeyup:e=>{"Enter"===e.key&&n()},class:"e",type:"text",value:"ffffff",spellcheck:"false",autoComplete:"on",placeholder:"ffffff"}),y(k,{id:t})]})};const C=({param:e})=>{const t=v(),n=v(),r=t=>{const n=t.target.valueAsNumber;h("set/rgb",[e,n>255?255:n])};return d(e,(r=>{const a=`${r[e]}`;t.current.value=a,n.current.value=a})),y("div",{class:"k",children:[y("span",{class:"l",children:e.toUpperCase()}),y("input",{type:"number",class:"m",max:255,min:0,step:1,ref:t,oninput:r}),y("input",{type:"range",class:"n",max:255,min:0,step:1,ref:n,oninput:r})]})},_=()=>y("fieldset",{children:[y("legend",{children:"RGB"}),y("div",{class:"d",children:[y(C,{param:"r"}),y(C,{param:"g"}),y(C,{param:"b"})]})]});const L=()=>y("fieldset",{children:[y("legend",{children:"Random Color"}),y("button",{type:"button",onclick:()=>{h("set/hex",i(6))},class:"f",children:"Generate"})]});const A=e=>{const t=e.target;t.select(),navigator.clipboard.writeText(t.value)},I=({label:e,ref:t})=>y("label",{children:[e,y("input",{ref:t,onclick:A,class:"o",type:"text",spellcheck:"false",readOnly:!0})]}),N=e=>{const t=y("canvas",{width:50,height:50}),n=t.getContext("2d",{alpha:!0,desynchronized:!0});if(n)return n.fillStyle=e,n.arc(25,25,24,0,2*Math.PI),n.stroke(),n.fill(),t.toDataURL("image/png",.1)},B=()=>{const e=v(),n=v(),r=v(),a=v(),i=document.querySelector('link[rel="icon"]');let l;return d("r","g","b","radix",(({r:c,g:d,b:h,radix:u})=>{const p=s(c,d,h),f="#"+t(c,d,h),g=`url(${p})`,m="display:inline-block;border:1px solid #c6e2f7;border-radius:50%;width:1em;height:1em;background-image:"+g;e.current.value=p,a.current.value=p.slice(22),n.current.value="https://shoonia.github.io/pixel-gif/"+f,r.current.value=o(c,d,h,u),document.body.style.backgroundImage=g,clearTimeout(l),l=setTimeout((()=>{document.title="1x1 Pixel GIF | "+f,location.hash=f,i.href=N(f)||"",console.log("%c  ",m,f)}),300)})),y("fieldset",{children:[y("legend",{children:"Output"}),y(I,{ref:e,label:"Data: URL"}),y(I,{ref:a,label:"Base64:"}),y("div",{class:"g",children:[y(I,{ref:r,label:"Bytes:"}),y("select",{ref:e=>{e.addEventListener("change",(()=>{p({radix:~~e.value})}))},class:"h",children:[y("option",{value:"16",children:"16"}),y("option",{value:"10",children:"10"}),y("option",{value:"8",children:"8"}),y("option",{value:"2",children:"2"})]})]}),y(I,{ref:n,label:"Share Link:"})]})};const P=e=>`1x1_#${e.toUpperCase()}.gif`,j=async()=>{const{r:e,g:t,b:n,hex:r}=u(),a=await window.showSaveFilePicker({suggestedName:P(r)});if("granted"===await a.queryPermission()){const r=await a.createWritable();await r.write(new Blob([new Uint8Array(l(e,t,n))],{type:"image/gif"})),await r.close()}},T=e=>{e.addEventListener("click",(()=>{const{r:t,g:n,b:r,hex:a}=u();e.download=P(a),e.href=s(t,n,r)}))};const D=()=>{const[e,t]=w("-");return fetch("https://api.github.com/repos/shoonia/pixel-gif").then((e=>e.json())).then((e=>e.stargazers_count)).catch((()=>"0")).then(t),y("div",{class:"p",children:[y("a",{href:"https://github.com/shoonia/pixel-gif","aria-label":"Star on GitHub",tabIndex:0,class:"r q",children:[y("svg",{height:"1.4em",width:"1.4em",viewBox:"0 0 16 16",__ns:1,children:y("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.43-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z",__ns:1})}),"Stars"]}),y("a",{href:"https://github.com/shoonia/pixel-gif/stargazers",target:"_blank",rel:"noopener noreferrer",tabIndex:0,class:"s q",children:e})]})},F=()=>{const e="function"==typeof window.showSaveFilePicker?y("button",{type:"button",class:"j",onclick:j,children:"Download"}):y("a",{role:"button",class:"j",ref:T,href:"#",children:"Download"});return y("fieldset",{class:"i",children:[e,y(D,{})]})},[G,M]=a(location.hash),O=G?M:i(6);history.pushState("","","#"+O),window.addEventListener("popstate",(()=>{const{hex:e}=u(),t=location.hash.slice(1);if(t!==e){const[e,n]=a(t);e&&h("set/hex",n)}})),h("set/hex",O),document.body.append(y((()=>y("main",{children:[y("div",{class:"a",children:[y("h1",{children:"One pixel Base64 encoded GIF generator"}),y(S,{})]}),y("div",{class:"b",children:[y(E,{}),y(_,{}),y(L,{})]}),y(B,{}),y(F,{})]})),{})),c();